"use strict";var controllers=angular.module("drubble.controllers",[]);controllers.controller("ShotsListController",["$http","$scope","$routeParams","drubble",function($http,$scope,$routeParams,drubble){var list=$routeParams.list;drubble.shots(list,{cache:!0}).then(function(data){$scope.lists=data})}]),controllers.controller("ShotController",["$routeParams","$scope","$http","drubble",function($routeParams,$scope,$http,drubble){var shotId=$routeParams.id;drubble.shot(shotId,{cache:!0}).then(function(data){$scope.shot=data.data,drubble.shotsByPlayerId(data.data.player.id,{per_page:5}).then(function(data){$scope.shotsPlayer=data.data,console.log($scope.shotsPlayer)})}),drubble.comments(shotId).then(function(data){$scope.comments=data.data.comments})}]),controllers.controller("LanguageController",["$translate","$scope","languages",function($translate,$scope,languages){$scope.change=function(value){$translate.use(value)},$scope.languages=languages.languages_available}]);
"use strict";var directives=angular.module("drubble.directives",[]);directives.directive("activeLink",["$location",function($location){return{restrict:"A",link:function(scope,element){scope.$watch(function(){return $location.path()},function(path){var url=element.find("a").attr("href");url&&(url=url.substring(1)),path==url?element.addClass("active"):element.removeClass("active")})}}}]),directives.directive("shotComments",function(){return{restrict:"E",templateUrl:"/pages/includes/comments.html"}}),directives.directive("shots",function(){return{restrict:"E",templateUrl:"/pages/includes/shots.html"}});
"use strict";var services=angular.module("drubble.services",[]);services.factory("drubble",["$http",function($http){function loadApi(path,params){return params=params||{},params.callback="JSON_CALLBACK",$http.jsonp("http://api.dribbble.com"+path,{params:params})}return{shots:function(type,params){return params=params||{},loadApi("/shots/"+type,params)},shot:function(id,params){return params=params||{},loadApi("/shots/"+id,params)},comments:function(id,params){return params=params||{},loadApi("/shots/"+id+"/comments",params)},shotsByPlayerId:function(id,params){return params=params||{},loadApi("/players/"+id+"/shots",params)}}}]),services.factory("languages",function(){return{languages_available:["fr","en"]}});
"use strict";var app=angular.module("drubble",["ngRoute","drubble.controllers","drubble.directives","drubble.services","pascalprecht.translate"]);app.config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$routeProvider.when("/shot/:id",{templateUrl:"/pages/shot.html",controller:"ShotController"}).when("/:list",{templateUrl:"/pages/home.html",controller:"ShotsListController"}).otherwise({redirectTo:"/popular"}),$locationProvider.html5Mode(!0),$locationProvider.hashPrefix("!")}]),app.config(["$translateProvider",function($translateProvider){$translateProvider.useStaticFilesLoader({prefix:"/public/languages/",suffix:".json"}),$translateProvider.preferredLanguage("fr")}]);